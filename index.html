<!DOCTYPE html>
<html>
<head>
  <title>Aplikacja do wysyłania JSONa</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>

  <h1>Aplikacja do wysyłania JSONa</h1>

  <form id="jsonForm">
    <label for="area">Powierzchnia:</label>
    <input type="number" id="area" name="area" required><br><br>

    <label for="num_rooms">Liczba pokoi:</label>
    <input type="number" id="num_rooms" name="num_rooms" required><br><br>

    <label for="floor">Piętro:</label>
    <input type="number" id="floor" name="floor" required><br><br>

    <label for="year_built">Rok budowy:</label>
    <input type="number" id="year_built" name="year_built" required><br><br>

    <label for="market">Rynek:</label>
    <select id="market" name="market" required>
      <option value="0">Wybierz</option>
      <option value="1">Pierwotny</option>
      <option value="2">Wtórny</option>
    </select><br><br>

    <label for="finishing_state">Stan wykończenia:</label>
    <select id="finishing_state" name="finishing_state" required>
      <option value="0">Wybierz</option>
      <option value="1">Do remontu</option>
      <option value="2">Do odświeżenia</option>
      <option value="3">Po odświeżeniu</option>
      <option value="4">Stan idealny</option>
    </select><br><br>

    <label for="building_type">Typ budynku:</label>
    <select id="building_type" name="building_type" required>
      <option value="0">Wybierz</option>
      <option value="1">Bloku</option>
      <option value="2">Domu jednorodzinnego</option>
      <option value="3">Apartamentowca</option>
    </select><br><br>

    <label for="district">Dzielnica:</label>
    <select id="district" name="district" required>
      <option value="0">Wybierz</option>
      <option value="1">Śródmieście</option>
      <option value="2">Mokotów</option>
      <option value="3">Ursynów</option>
      <option value="4">Żoliborz</option>
    </select><br><br>

    <input type="submit" value="Wyślij">
  </form>

  <div id="response"></div>

  <script>
    $(document).ready(function() {
      $('#jsonForm').submit(function(event) {
        event.preventDefault();

        var formData = {
          "area": $('#area').val(),
          "num_rooms": $('#num_rooms').val(),
          "floor": $('#floor').val(),
          "year_built": $('#year_built').val(),
          "market": $('#market').val(),
          "finishing_state": $('#finishing_state').val(),
          "building_type": $('#building_type').val(),
          "district": $('#district').val()
        };

        $.ajax({
          type: 'POST',
          url: 'https://apartament-price-finder-2136d56133d3.herokuapp.com/items/',
          data: JSON.stringify(formData),
          contentType: 'application/json',
          success: function(response) {
            $('#response').html('Cena: ' + response.price);
          },
          error: function(error) {
            $('#response').html('Wystąpił błąd: ' + error.responseText);
          }
        });
      });
    });
  </script>
</body>
</html>
